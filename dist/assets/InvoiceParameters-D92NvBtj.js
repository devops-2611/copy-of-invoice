import{k as Te,j as e,R as ve,a as Ce,n as fe,A as Oe,b as Pe,r as P,P as Ee,B as he,G as y,e as U,x as ge,H as be,K as me,ac as Ae,ad as $,L as Be,ae as Se}from"./index-BLIlmA3H.js";import{F as Le,a as Re,e as N}from"./index.esm-DfjObHCA.js";import{c as De,l as _,m as x,i as n,h as o,I as Fe,F as Ve,n as Me,B as Y,q as ke,r as k,t as ue}from"./MUIThemeProvider-C19IRQrA.js";import{F as He}from"./FormikInputField-B2PJ7d2X.js";import{d as Ie,i as we,c as je}from"./helperFuntions-DGUG679L.js";import{S as Ne}from"./Stack-C0tO9y16.js";import{T as H}from"./Title-DKWiMa_B.js";import{L as $e}from"./LoadingOverlay-C_GBlKZb.js";import{F as _e}from"./Select-BzWorYtb.js";import{L as pe}from"./List-C2rtPsw9.js";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ue=Te("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ye=Te("outline","file-download","IconFileDownload",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M12 17v-6",key:"svg-2"}],["path",{d:"M9.5 14.5l2.5 2.5l2.5 -2.5",key:"svg-3"}]]);const Ye=De(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),Ge=({updates:r})=>{const i=Pe.EDIT_MERCHANT_INVOICE();return Oe.PUT(i,r)},ze=()=>{const r=ve();return Ce({mutationFn:({updates:i})=>Ge({updates:i}),onSuccess:i=>{var u;fe.show({title:"Invoice Update",message:((u=i==null?void 0:i.data)==null?void 0:u.message)??"Invoice updated successfully",color:"green",autoClose:2e3,position:"top-center"}),r.invalidateQueries({queryKey:["All_Invoices-Grid-data"]})},onError:i=>{Ie(i)}})};function qe(){var T,C,f,V,I,M,E,g,b,A,B,S,L;const{values:r,setFieldValue:i}=N(),u=a=>{var t,d,m,v;i("invoiceParameters",{...r==null?void 0:r.invoiceParameters,calculationsByOrderType:{...(t=r==null?void 0:r.invoiceParameters)==null?void 0:t.calculationsByOrderType,MISCELLANEOUS:((v=(m=(d=r==null?void 0:r.invoiceParameters)==null?void 0:d.calculationsByOrderType)==null?void 0:m.MISCELLANEOUS)==null?void 0:v.filter((w,O)=>O!==a))??[]}})},s=()=>{var a,t,d;return i("invoiceParameters",{...r==null?void 0:r.invoiceParameters,calculationsByOrderType:{...(a=r==null?void 0:r.invoiceParameters)==null?void 0:a.calculationsByOrderType,MISCELLANEOUS:[...((d=(t=r==null?void 0:r.invoiceParameters)==null?void 0:t.calculationsByOrderType)==null?void 0:d.MISCELLANEOUS)??[],{amount:0,text:"",isVatApplicable:!0}]}})},{calculationsByOrderType:p,validItem:j,isInHouseType:h}=r.invoiceParameters;P.useEffect(()=>{const a=t=>{var v,w,O,R,D,F;const d=(O=(w=(v=r.invoiceParameters)==null?void 0:v.calculationsByOrderType)==null?void 0:w[t])==null?void 0:O.totalOrderValue,m=(F=(D=(R=r.invoiceParameters)==null?void 0:R.calculationsByOrderType)==null?void 0:D[t])==null?void 0:F.commissionRate;return d===void 0||m===void 0?0:d*.01*m};Object.hasOwn(r.invoiceParameters.calculationsByOrderType,"DELIVERY")&&i("invoiceParameters.calculationsByOrderType.DELIVERY.amount",a("DELIVERY")),Object.hasOwn(r.invoiceParameters.calculationsByOrderType,"COLLECTION")&&i("invoiceParameters.calculationsByOrderType.COLLECTION.amount",a("COLLECTION"))},[(C=(T=r.invoiceParameters.calculationsByOrderType)==null?void 0:T.DELIVERY)==null?void 0:C.totalOrderValue,(V=(f=r.invoiceParameters.calculationsByOrderType)==null?void 0:f.COLLECTION)==null?void 0:V.totalOrderValue,(M=(I=r.invoiceParameters.calculationsByOrderType)==null?void 0:I.DELIVERY)==null?void 0:M.commissionRate,(g=(E=r.invoiceParameters.calculationsByOrderType)==null?void 0:E.COLLECTION)==null?void 0:g.commissionRate]);const l=[...Object.entries(p).map(([a,t])=>{var m,v,w,O,R,D,F,G,z,q,Q,K,W,J,X,Z,ee,re,ne,ie,se,oe,ae,te,le,ce,de,xe;let d=null;if(a==="COLLECTION")d=e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsxs(y,{children:[e.jsx(o,{children:`${t.commissionRate}% Commission on Collection Orders value`}),e.jsx(x,{name:"invoiceParameters.calculationsByOrderType.COLLECTION.totalOrderValue",label:"",extraProps:{prefix:"£",maw:"100px"}})]})}),e.jsx(n.Td,{children:e.jsx(o,{children:(O=(w=(v=(m=r==null?void 0:r.invoiceParameters)==null?void 0:m.calculationsByOrderType)==null?void 0:v[a])==null?void 0:w.amount)==null?void 0:O.toFixed(2)})})]});else if(a==="DELIVERY")d=e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsxs(y,{children:[e.jsx(o,{children:`${t.commissionRate}% Commission on Delivery Orders value`}),e.jsx(x,{name:"invoiceParameters.calculationsByOrderType.DELIVERY.totalOrderValue",label:"",extraProps:{prefix:"£",maw:"100px"}})]})}),e.jsx(n.Td,{children:e.jsx(o,{children:(G=(F=(D=(R=r==null?void 0:r.invoiceParameters)==null?void 0:R.calculationsByOrderType)==null?void 0:D[a])==null?void 0:F.amount)==null?void 0:G.toFixed(2)})})]});else if(a==="SERVICE_FEE"&&!t.isCashOrders)d=e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsxs(o,{children:["Service Fee Paid (",t.totalOrders," Orders)"]})}),e.jsx(n.Td,{children:e.jsx(o,{children:(K=(Q=(q=(z=r==null?void 0:r.invoiceParameters)==null?void 0:z.calculationsByOrderType)==null?void 0:q[a])==null?void 0:Q.amount)==null?void 0:K.toFixed(2)})})]});else if(a==="SERVICE_FEE"&&t.isCashOrders)d=e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsxs(o,{children:["Service Fee Paid By Cash Orders (",t.totalOrders," Orders)"]})}),e.jsx(n.Td,{children:e.jsx(o,{children:(Z=(X=(J=(W=r==null?void 0:r.invoiceParameters)==null?void 0:W.calculationsByOrderType)==null?void 0:J[a])==null?void 0:X.amount)==null?void 0:Z.toFixed(2)})})]});else if(a==="DELIVERY_CHARGE"&&!t.isCashOrders&&!h)d=e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsxs(o,{children:["Delivery Charge (",t.totalOrders," Orders)"]})}),e.jsx(n.Td,{children:e.jsx(o,{children:(ie=(ne=(re=(ee=r==null?void 0:r.invoiceParameters)==null?void 0:ee.calculationsByOrderType)==null?void 0:re[a])==null?void 0:ne.amount)==null?void 0:ie.toFixed(2)})})]});else if(a==="DELIVERY_CHARGE"&&t.isCashOrders&&!h)d=e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsxs(o,{children:["Delivery Charge Paid By Cash Orders (",t.totalOrders," Orders)"]})}),e.jsx(n.Td,{children:e.jsx(o,{children:(te=(ae=(oe=(se=r==null?void 0:r.invoiceParameters)==null?void 0:se.calculationsByOrderType)==null?void 0:oe[a])==null?void 0:ae.amount)==null?void 0:te.toFixed(2)})})]});else if(a==="DRIVER_TIP"&&!h)d=e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsxs(o,{children:["Driver Tip (",t.totalOrders," Orders)"]})}),e.jsx(n.Td,{children:e.jsx(o,{children:(xe=(de=(ce=(le=r==null?void 0:r.invoiceParameters)==null?void 0:le.calculationsByOrderType)==null?void 0:ce[a])==null?void 0:de.amount)==null?void 0:xe.toFixed(2)})})]});else if(a==="MISCELLANEOUS")return null;return d}),...(A=(b=r==null?void 0:r.invoiceParameters)==null?void 0:b.calculationsByOrderType)!=null&&A.MISCELLANEOUS&&((L=(S=(B=r==null?void 0:r.invoiceParameters)==null?void 0:B.calculationsByOrderType)==null?void 0:S.MISCELLANEOUS)==null?void 0:L.length)>0?r.invoiceParameters.calculationsByOrderType.MISCELLANEOUS.map((a,t)=>e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsxs(y,{children:[e.jsx(ge,{color:"red",variant:"subtle",onClick:d=>u(t),children:e.jsx(Fe,{})}),e.jsx(He,{name:`invoiceParameters.calculationsByOrderType.MISCELLANEOUS[${t}].text`,label:""}),e.jsx(Ve,{name:`invoiceParameters.calculationsByOrderType.MISCELLANEOUS[${t}].isVatApplicable`,label:"VAT Applicable",RenderTextNodeforAlignment:!1})]})}),e.jsx(n.Td,{children:e.jsx(x,{name:`invoiceParameters.calculationsByOrderType.MISCELLANEOUS[${t}].amount`,label:"",extraProps:{prefix:"£",maw:"100px"}})})]},`MISCELLANEOUS ${t}`)):[],...j.length>0?j.map((a,t)=>e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsxs(o,{children:[" ",`${a.itemName}, ${a.totalQuantity} Qty (Remaining £${a.balanceAmount.toFixed(2)})`]})}),e.jsx(n.Td,{children:e.jsx(x,{name:`invoiceParameters.validItem[${t}].deductableAmount`,label:"",extraProps:{prefix:"£",maw:"100px"}})})]},a._id)):[]],c=P.useMemo(()=>e.jsxs(n.Tr,{children:[e.jsx(n.Th,{children:"Description"}),e.jsx(n.Th,{children:"Amount"})]}),[]);return e.jsxs(Me,{children:[e.jsxs(n,{captionSide:"bottom",withColumnBorders:!0,withRowBorders:!0,withTableBorder:!0,borderColor:"black",mt:20,children:[e.jsx(n.Thead,{children:c}),e.jsx(n.Tbody,{children:l})]}),e.jsx(U,{onClick:()=>s(),mt:10,variant:"outline",children:"Add Row in the table"})]})}function Qe(){var j,h,l,c,T;const{values:r}=N(),i=(j=r==null?void 0:r.invoiceParameters)==null?void 0:j.isInHouseType,u=(h=r==null?void 0:r.invoiceParameters)==null?void 0:h.deliveryChargeInHouse,s=(l=r==null?void 0:r.invoiceParameters)==null?void 0:l.driverTipInHouse,p=[e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{children:"Total Orders"})}),e.jsx(n.Td,{children:e.jsx(x,{name:"invoiceParameters.totalOrdersCount",label:"",extraProps:{maw:"100px"}})})]},"totalOrdersCount"),e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{children:"Delivery Orders"})}),e.jsx(n.Td,{children:e.jsx(x,{name:"invoiceParameters.deliveryOrderCount",label:"",extraProps:{maw:"100px"}})})]},"deliveryOrderCount"),e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{children:"Collection Orders"})}),e.jsx(n.Td,{children:e.jsx(x,{name:"invoiceParameters.collectionOrderCount",label:"",extraProps:{maw:"100px"}})})]},"collectionOrderCount"),e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsxs(y,{children:[e.jsx(x,{name:"invoiceParameters.cardPaymentCount",label:"",extraProps:{maw:"100px"}})," ",e.jsx(o,{children:"Card Payments"})]})}),e.jsx(n.Td,{children:e.jsx(x,{name:"invoiceParameters.cardPaymentAmount",label:"",extraProps:{prefix:"£",maw:"100px"}})})]},"cardPaymentAmount"),e.jsxs(n.Tr,{children:[e.jsxs(n.Td,{children:[e.jsxs(y,{children:[e.jsx(x,{name:"invoiceParameters.cashPaymentCount",label:"",extraProps:{maw:"100px"}})," ",e.jsx(o,{children:"Cash Payments (Including Service & Delivery Charges)"})]})," "]}),e.jsx(n.Td,{children:e.jsx(x,{name:"invoiceParameters.cashPaymentAmount",label:"",extraProps:{prefix:"£",maw:"100px"}})})]},"cashPaymentAmount"),...i&&u?[e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsxs(y,{children:[e.jsx(o,{children:"Own delivery charges ("}),e.jsx(x,{name:"invoiceParameters.deliveryChargeInHouse.totalOrders",label:"",extraProps:{maw:"100px"}}),e.jsx(o,{children:") orders"})]})}),e.jsx(n.Td,{children:e.jsx(x,{name:"invoiceParameters.deliveryChargeInHouse.amount",label:"",extraProps:{prefix:"£",maw:"100px"}})})]},"isInHouseType_deliveryChargeInHouse")]:[],...i&&s?[e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsxs(y,{children:[e.jsx(o,{children:" Driver tip paid ("}),e.jsx(x,{name:"invoiceParameters.driverTipInHouse.totalOrders",label:"",extraProps:{maw:"100px"}}),e.jsx(o,{children:") orders"})]})}),e.jsx(n.Td,{children:e.jsx(x,{name:"invoiceParameters.driverTipInHouse.amount",label:"",extraProps:{prefix:"£",maw:"100px"}})})]},"isInHouseType_driverTipInHouse")]:[],...we((c=r==null?void 0:r.invoiceParameters)==null?void 0:c.totalRefundAmount)?[e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{children:"Refunds"})}),e.jsx(n.Td,{children:e.jsx(o,{children:(T=r==null?void 0:r.invoiceParameters)==null?void 0:T.totalRefundAmount})})]},"totalRefundAmount")]:[],e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{children:"Total Sales"})}),e.jsx(n.Td,{children:e.jsx(x,{name:"invoiceParameters.totalSales",label:"",extraProps:{prefix:"£",maw:"100px"}})})]},"totalSales")];return e.jsxs(e.Fragment,{children:[e.jsx(H,{order:4,mt:20,mb:10,m:"auto",children:"Summary Table"}),e.jsx(n,{withColumnBorders:!0,withRowBorders:!0,withTableBorder:!0,borderColor:"black",children:e.jsx(n.Tbody,{children:p})})]})}function Ke(){var p,j,h;const{values:r,setFieldValue:i}=N();P.useEffect(()=>{var c,T;const l=(T=(c=r==null?void 0:r.invoiceParameters)==null?void 0:c.refundArray)==null?void 0:T.reduce((C,f)=>C+f.refundAmount,0);we(l)&&i("invoiceParameters.totalRefundAmount",l)},[(p=r.invoiceParameters)==null?void 0:p.refundArray,i]);const u=(h=(j=r==null?void 0:r.invoiceParameters)==null?void 0:j.refundArray)==null?void 0:h.map((l,c)=>e.jsxs(n.Tr,{children:[e.jsx(n.Td,{children:e.jsx(o,{children:l==null?void 0:l.orderId})}),e.jsx(n.Td,{children:e.jsx(o,{children:be(l==null?void 0:l.orderDate).format("DD MMM YYYY")})}),e.jsx(n.Td,{children:e.jsx(x,{name:`invoiceParameters.refundArray[${[c]}].refundAmount`})}),e.jsx(n.Td,{children:e.jsx(o,{children:l==null?void 0:l.invoiceId})})]},`refundTable${[c]}`)),s=P.useMemo(()=>e.jsxs(n.Tr,{children:[e.jsx(n.Th,{children:"order Id"}),e.jsx(n.Th,{children:"Order Date"}),e.jsx(n.Th,{children:"Refund Amount"}),e.jsx(n.Th,{children:"Invoice Id(if already billed)"})]}),[]);return e.jsxs(e.Fragment,{children:[e.jsx(H,{order:4,mt:20,mb:10,m:"auto",children:"Refund Summary"}),e.jsxs(n,{withColumnBorders:!0,withRowBorders:!0,withTableBorder:!0,borderColor:"black",children:[e.jsx(n.Thead,{children:s}),e.jsx(n.Tbody,{children:u})]})]})}function We(){const{values:r}=N(),i=P.useMemo(()=>e.jsxs(n.Tr,{children:[e.jsx(n.Th,{w:"60%",children:e.jsx(o,{children:"Total Refund"})}),e.jsx(n.Th,{w:"40%",children:r==null?void 0:r.invoiceParameters.totalRefundAmount})]}),[r==null?void 0:r.invoiceParameters.totalRefundAmount]);return e.jsx(n,{withColumnBorders:!0,withRowBorders:!0,withTableBorder:!0,borderColor:"black",children:e.jsx(n.Thead,{children:i})})}const Je=r=>{const{closeModal:i,initialValues:u}=r,s=P.useRef(null),{mutateAsync:p,isPending:j,isSuccess:h}=ze(),l=c=>{p({updates:c})};return P.useEffect(()=>{h&&i()},[h]),e.jsxs(Ee,{p:"xl",shadow:"sm",withBorder:!0,w:"100%",pos:"relative",children:[e.jsx(Le,{initialValues:u,onSubmit:l,innerRef:s,children:({values:c,setFieldValue:T})=>{var C,f;return e.jsx(Re,{children:e.jsxs(Ne,{w:"100%",children:[e.jsxs(H,{order:5,ta:"center",mb:20,c:"grey",children:["Invoice Id: ",c==null?void 0:c.invoiceId]}),e.jsx(he,{children:e.jsx(_,{name:"invoiceParameters.invoiceDate",label:"Invoice Date"})}),e.jsxs(y,{children:[e.jsx(_,{name:"fromDate",label:"From Date"}),e.jsx(_,{name:"toDate",label:"To Date"})]}),e.jsx(qe,{}),e.jsx(Qe,{}),((f=(C=c==null?void 0:c.invoiceParameters)==null?void 0:C.refundArray)==null?void 0:f.length)&&e.jsxs(e.Fragment,{children:[e.jsx(Ke,{}),e.jsx(he,{w:"50%",children:e.jsx(We,{})})]}),e.jsx(H,{order:4,mt:20,mb:10,m:"auto",children:"Account Section"}),e.jsxs(y,{children:[e.jsx(x,{name:"invoiceParameters.openingBalance",label:"Opening Balance",extraProps:{prefix:"£"}}),e.jsx(x,{name:"invoiceParameters.closingBalance",label:"Closing Balance",extraProps:{prefix:"£"}}),e.jsx(x,{name:"invoiceParameters.currentInvoiceCount",label:"Current Invoice Count"})]}),e.jsxs(y,{grow:!0,gap:"md",mt:20,children:[e.jsx(U,{type:"submit",loading:j,children:"Submit"}),e.jsx(U,{type:"reset",variant:"outline",disabled:j,children:"Reset"})]})]})})}}),e.jsx($e,{visible:j,zIndex:1e3,overlayProps:{radius:"sm",blur:2}})]})},Xe=({invoiceId:r})=>{const i=`${Pe.VIEW_INVOICE_BY_MERCHANT()}?invoiceId=${r}`;return Oe.GET(i)},Ze=()=>{const r=ve();return Ce({mutationFn:({invoiceId:i})=>Xe({invoiceId:i}),onSuccess:i=>{var u;(u=i==null?void 0:i.data)!=null&&u.success&&r.invalidateQueries({queryKey:["All_Invoices-Grid-data"]})},onError:i=>{Ie(i)}})},er=()=>{const{mutateAsync:r,isPending:i,variables:u}=Ze();return{handleViewAndDownloadInvoice:async({invoiceId:p,downloadlink:j})=>{let h;try{await r({invoiceId:p}),h=window.open(j,"_blank","noopener,noreferrer")}catch(l){if(!h)throw new Error("Failed to open a new window. The browser may have blocked it.");l instanceof Error&&fe.show({title:"Error",message:l.message||"Failed to view or download the invoice.",color:"red"})}},isPending:i,variables:u}},rr=({label:r,value:i})=>e.jsxs(Y,{children:[e.jsx(o,{variant:"body1",sx:{fontWeight:600},children:r}),e.jsx(o,{variant:"body2",color:"textSecondary",children:i})]}),hr=({row:r})=>{var E,g,b,A,B,S,L,a,t,d;const i=(E=r.original)==null?void 0:E.downloadLink,u=(g=r.original)==null?void 0:g.isEditable,s=(b=r.original)==null?void 0:b.invoiceParameters,[p,{open:j,close:h}]=me(!1),{pathname:l}=Ae(),{handleViewAndDownloadInvoice:c,isPending:T}=er(),[C,{open:f,close:V}]=me(!1),I=l==null?void 0:l.includes("accounting/invoices"),M=[{label:"Total Sales",value:`£${s==null?void 0:s.totalSales}`},{label:"Total Orders Count",value:s==null?void 0:s.totalOrdersCount},{label:"Delivery Orders",value:s==null?void 0:s.deliveryOrderCount},{label:"Collection Orders",value:s==null?void 0:s.collectionOrderCount},{label:`Card Payments (${s==null?void 0:s.cardPaymentCount})`,value:`£${s==null?void 0:s.cardPaymentAmount}`},{label:`Cash Payments (${s==null?void 0:s.cashPaymentCount})`,value:`£${s==null?void 0:s.cashPaymentAmount}`},{label:"Delivery Order Value",value:`£${s==null?void 0:s.deliveryOrderValue}`},{label:"Collection Order Value",value:`£${s==null?void 0:s.collectionOrderValue}`}];return e.jsxs(e.Fragment,{children:[e.jsx(Y,{sx:{padding:1},children:e.jsxs(ke,{elevation:2,sx:{padding:2},children:[e.jsxs(_e,{justify:"space-between",align:"flex-start",children:[e.jsxs(o,{variant:"h6",sx:{marginBottom:2,display:"flex",alignItems:"center"},children:[e.jsx(Ye,{sx:{marginRight:1},color:"primary"}),"Invoice Summary"]}),((A=r.original)==null?void 0:A.isSentToMerchant)&&((B=r.original)==null?void 0:B.sentToMerchantAt)&&I&&e.jsxs(y,{mr:20,children:[e.jsxs(o,{variant:"subtitle1",style:{fontStyle:"italic"},children:["Sent to Merchant at"," ",je((S=r.original)==null?void 0:S.sentToMerchantAt)]}),((a=(L=r.original)==null?void 0:L.viewHistory)==null?void 0:a.length)>0&&e.jsxs($,{position:"top",withArrow:!0,shadow:"md",opened:C,children:[e.jsx($.Target,{children:e.jsx(k,{onMouseEnter:f,onMouseLeave:V,variant:"outlined",children:"Seen History"})}),e.jsxs($.Dropdown,{style:{pointerEvents:"none"},children:[e.jsx(o,{children:"Merchant Seen History :"}),e.jsx(pe,{mt:5,children:(d=(t=r.original)==null?void 0:t.viewHistory)==null?void 0:d.map(m=>e.jsx(pe.Item,{children:je(m)},m))})]})]})]})]}),e.jsx(ue,{sx:{marginBottom:2}}),e.jsx(Y,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:2,marginBottom:2},children:M.map(m=>e.jsx(rr,{label:m.label,value:m.value},m.label))}),e.jsx(ue,{sx:{marginTop:2}}),e.jsxs(y,{mt:20,align:"flex-end",children:[i&&I?e.jsx(k,{variant:"contained",href:i,target:"_blank",rel:"noopener noreferrer",sx:{marginTop:1},startIcon:e.jsx(ye,{}),children:"Download Invoice"}):e.jsx(k,{variant:"contained",color:"primary",onClick:()=>{var m,v;c({invoiceId:(m=r.original)==null?void 0:m.invoiceId,downloadlink:(v=r.original)==null?void 0:v.downloadLink})},startIcon:T?e.jsx(Be,{size:"xs",color:"white"}):e.jsx(ye,{}),children:"Download Invoice"}),I&&u&&e.jsx(k,{variant:"outlined",color:"primary",onClick:j,sx:{marginTop:1},startIcon:e.jsx(Ue,{}),children:"EDIT INVOICE"})]})]})}),e.jsx(Se,{opened:p,onClose:h,title:"",fullScreen:!0,radius:10,closeButtonProps:{iconSize:"lg"},transitionProps:{transition:"fade",duration:200},children:e.jsx(Je,{initialValues:r.original,closeModal:h})})]})};export{hr as I,ze as a,er as u};
