import{r as i,E as g,F as v,A,b as C,H as D,K as E,j as d,d as F}from"./index-BLIlmA3H.js";import{h as Y,a as K,D as M,T as O}from"./MUIThemeProvider-C19IRQrA.js";import{c as p}from"./helperFuntions-DGUG679L.js";import"./index-BK5A5XBL.js";import"./index.esm-DfjObHCA.js";import"./InputBase-DX49xYkW.js";import"./FormikInputField-B2PJ7d2X.js";import"./TextInput-HlJqnerf.js";import"./useUpdateUser-w8Owpn5w.js";import"./Select-BzWorYtb.js";import"./Alert-D3dw1Im4.js";import"./LoadingOverlay-C_GBlKZb.js";import"./Title-DKWiMa_B.js";import"./Stack-C0tO9y16.js";function S(a){return D(a,"DD MMM YYYY hh:mm A").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}const P=a=>{let r={};return a==null||a.forEach(t=>{var e;Array.isArray(t.value)?r[t.id]=(e=t.value)==null?void 0:e.join(","):r[t.id]=t.value}),r},j=a=>{var n,o;let r="";const t=(n=a==null?void 0:a[0])==null?void 0:n.id,e=(o=a==null?void 0:a[0])==null?void 0:o.desc;if(t==="createdAt"&&!e?r="ascDate":t==="createdAt"&&e&&(r="descDate"),r)return{sort:r}},z=a=>{let r="",t="";const e=a==null?void 0:a.find(n=>n.id==="createdAt");if(e&&Array.isArray(e==null?void 0:e.value)&&(r=e!=null&&e.value[0]?S(e==null?void 0:e.value[0]):"",t=e!=null&&e.value[1]?S(e==null?void 0:e.value[1]):""),r||t)return{startDate:r,endDate:t}};function T(a,r,t){const e={pageNo:t.pageIndex+1,limit:t.pageSize,...j(r),...P(a),...z(a)};return A.GET(C.GET_REFUND_DETAILS(),{params:e})}const w=a=>{const{columnFilters:r,EnableQuery:t,sorting:e,pagination:n}=a,[o,c]=i.useState([]);return i.useEffect(()=>{t&&c(r)},[r,t]),g({queryKey:["Refund-Grid-data",o,e,n],queryFn:()=>T(o,e,n),placeholderData:v,refetchOnMount:!0,refetchOnWindowFocus:!1,retry:2})},J=()=>{var f,m;const[a,r]=i.useState([]),[t,e]=i.useState([]),[n,o]=i.useState({pageIndex:0,pageSize:50}),[c,{open:u,close:h}]=E(!1),{data:l,isError:y,isLoading:b}=w({columnFilters:a,EnableQuery:!c,sorting:t,pagination:n}),x=i.useMemo(()=>[{accessorKey:"orderId",header:"Order Id",enableSorting:!1},{accessorKey:"orderDate",header:"Order Date",accessorFn:s=>new Date(s.orderDate),filterVariant:"datetime-range",Cell:({cell:s})=>p(s.getValue()),enableSorting:!1,maxSize:100,enableColumnFilter:!1},{accessorKey:"customerId",header:"Customer Id",enableSorting:!1,maxSize:100},{accessorKey:"merchantId",header:"Merchant Id",enableSorting:!1,maxSize:100},{accessorKey:"invoiceId",header:"Invoice Id",enableSorting:!1,maxSize:100},{accessorKey:"invoiceDate",header:"Invoice Date",enableSorting:!1,accessorFn:s=>new Date(s.invoiceDate),filterVariant:"datetime-range",Cell:({cell:s})=>p(s.getValue()),maxSize:100,enableColumnFilter:!1},{accessorKey:"refundCaptureDate",header:"Refund Capture Date",enableSorting:!0,accessorFn:s=>new Date(s.refundCaptureDate),filterVariant:"datetime-range",Cell:({cell:s})=>{const I=s.getValue();return D(I).format("DD MMM YYYY hh:mm A")},muiFilterDateTimePickerProps:{label:"Refund Capture Date",timeSteps:{minutes:1}},maxSize:100},{accessorKey:"refundAmount",header:"Refund Amount",enableSorting:!1,maxSize:100,enableColumnFilter:!1},{accessorKey:"isSettled",header:"Is Settled",enableSorting:!1,maxSize:100,Cell:({cell:s})=>d.jsx(Y,{children:s.getValue()?"Yes":"No"}),enableColumnFilter:!0,filterVariant:"autocomplete",filterSelectOptions:[{value:"true",label:"YES"},{value:"false",label:"NO"}]}],[]);return d.jsx(K,{children:d.jsx(i.Suspense,{fallback:d.jsx(F,{height:300,width:"100%"}),children:d.jsx(M,{data:((f=l==null?void 0:l.data)==null?void 0:f.refundOrders)??[],columnFilters:a,columns:x,pagination:n,sorting:t,totalRowCount:((m=l==null?void 0:l.data)==null?void 0:m.totalCount)??0,onColumnFiltersChange:r,onPaginationChange:o,onSortingChange:e,isLoading:b,OnFilterButtonClicked:()=>u(),OnApplyFiltersClicked:()=>h(),filterDrawerIsOpen:c,isError:y,tableName:O.RefundDisplay,crudOperationHeader:"Refunds",columnPinning:{left:["orderId","orderDate"],right:["refundAmount","isSettled"]},uniqueIDForRows:"_id",enableRowActions:!1})})})};export{J as default};
