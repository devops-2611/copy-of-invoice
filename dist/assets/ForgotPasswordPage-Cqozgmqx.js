import{a as m,f as u,n as x,A as p,b as h,c as f,r as g,j as e,C as w,P as j,B as i,T as y,e as S}from"./index-BLIlmA3H.js";import{u as b,c as P,b as A}from"./index.esm-DfjObHCA.js";import{A as T}from"./Alert-D3dw1Im4.js";import{I as C}from"./IconAlertTriangle-Dkbv4I-u.js";import{T as E}from"./Title-DKWiMa_B.js";import{S as l}from"./Space-CTMsfqIj.js";import{T as k}from"./TextInput-HlJqnerf.js";import{A as F}from"./Anchor-BwVix8f5.js";import"./InputBase-DX49xYkW.js";const v=async s=>{if(!s)throw new Error("Email is required");return p.POST(h.FORGOT_PASSWORD(),{email:s})},z=()=>m({mutationFn:async({email:s})=>await v(s),onError:s=>{var t,o;const r=s instanceof u?((o=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:o.message)??"Failed to send password reset link.":"An unexpected error occurred. Please try again.";x.show({title:"Error",message:r,color:"red",autoClose:5e3})}}),R={email:""},q=P({email:A().email("Invalid email format").required("Email is required")}),L=()=>{var n;const{mutate:s,isSuccess:r,data:t}=z(),o=f(),c=g.useCallback(()=>{o("/login")},[]),a=b({initialValues:R,validationSchema:q,onSubmit:d=>{s(d)}});return e.jsx(w,{size:"xs",mt:"xl",children:r&&((n=t==null?void 0:t.data)!=null&&n.success)?e.jsx(T,{icon:e.jsx(C,{size:"1rem"}),title:"Success",color:"green",styles:{title:{fontSize:18}},children:"Password Reset Link Sent Successfuly. You can close this tab."}):e.jsxs(j,{p:"xl",shadow:"xs",withBorder:!0,styles:{root:{marginTop:100,boxShadow:"0 8px 20px rgba(0, 0, 0, 0.15)",transition:"box-shadow 0.3s ease","&:hover":{boxShadow:"0 12px 25px rgba(0, 0, 0, 0.2)"}}},children:[e.jsxs(i,{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[e.jsx(E,{order:3,children:"Forgot your password?"}),e.jsx(y,{mt:"sm",size:"sm",children:"Please enter the email address associated with your account and we will email you a link to reset your password."})]}),e.jsx(l,{h:"lg"}),e.jsxs("form",{onSubmit:a.handleSubmit,children:[e.jsx(k,{placeholder:"Email address (Required)",...a.getFieldProps("email"),error:a.touched.email&&a.errors.email,required:!0}),e.jsx(l,{h:"md"}),e.jsx(i,{style:{display:"flex",justifyContent:"center"},children:e.jsx(S,{type:"submit",size:"md",w:200,children:"Reset Password"})}),e.jsx(i,{mt:"md",style:{display:"flex",justifyContent:"center"},children:e.jsx(F,{onClick:c,size:"sm",children:"Back"})})]})]})})};export{L as default};
