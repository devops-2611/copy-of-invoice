import{r as i,y as g,z as v,A,b as C,D,F,j as d,S as Y}from"./index-BocbaNEA.js";import{f as E,a as M,D as z}from"./MUIThemeProvider-CweUhTdT.js";import{c as p}from"./helperFuntions-CM2HUrvq.js";import"./index.esm-BJmHqlnb.js";import"./Rating-puGU3s4J.js";import"./FormikInputField-vBle5Dp0.js";import"./TextInput-WJD_G6xF.js";import"./useUpdateUser-J2CWGRqD.js";import"./index-DBElLul9.js";import"./Alert-BlMm2AM-.js";import"./LoadingOverlay-pZ8X-IXh.js";import"./Title-DvwRX8VF.js";function S(a){return D(a,"DD MMM YYYY hh:mm A").format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}const K=a=>{let r={};return a==null||a.forEach(t=>{var e;Array.isArray(t.value)?r[t.id]=(e=t.value)==null?void 0:e.join(","):r[t.id]=t.value}),r},O=a=>{var n,o;let r="";const t=(n=a==null?void 0:a[0])==null?void 0:n.id,e=(o=a==null?void 0:a[0])==null?void 0:o.desc;if(t==="createdAt"&&!e?r="ascDate":t==="createdAt"&&e&&(r="descDate"),r)return{sort:r}},P=a=>{let r="",t="";const e=a==null?void 0:a.find(n=>n.id==="createdAt");if(e&&Array.isArray(e==null?void 0:e.value)&&(r=e!=null&&e.value[0]?S(e==null?void 0:e.value[0]):"",t=e!=null&&e.value[1]?S(e==null?void 0:e.value[1]):""),r||t)return{startDate:r,endDate:t}};function j(a,r,t){const e={pageNo:t.pageIndex+1,limit:t.pageSize,...O(r),...K(a),...P(a)};return A.GET(C.GET_REFUND_DETAILS(),{params:e})}const w=a=>{const{columnFilters:r,EnableQuery:t,sorting:e,pagination:n}=a,[o,c]=i.useState([]);return i.useEffect(()=>{t&&c(r)},[r,t]),g({queryKey:["Refund-Grid-data",o,e,n],queryFn:()=>j(o,e,n),placeholderData:v,refetchOnMount:!0,refetchOnWindowFocus:!1,retry:2})},B=()=>{var f,m;const[a,r]=i.useState([]),[t,e]=i.useState([]),[n,o]=i.useState({pageIndex:0,pageSize:50}),[c,{open:u,close:h}]=F(!1),{data:l,isError:y,isLoading:b}=w({columnFilters:a,EnableQuery:!c,sorting:t,pagination:n}),x=i.useMemo(()=>[{accessorKey:"orderId",header:"Order Id",enableSorting:!1},{accessorKey:"orderDate",header:"Order Date",accessorFn:s=>new Date(s.orderDate),filterVariant:"datetime-range",Cell:({cell:s})=>p(s.getValue()),enableSorting:!1,maxSize:100,enableColumnFilter:!1},{accessorKey:"customerId",header:"Customer Id",enableSorting:!1,maxSize:100},{accessorKey:"merchantId",header:"Merchant Id",enableSorting:!1,maxSize:100},{accessorKey:"invoiceId",header:"Invoice Id",enableSorting:!1,maxSize:100},{accessorKey:"invoiceDate",header:"Invoice Date",enableSorting:!1,accessorFn:s=>new Date(s.invoiceDate),filterVariant:"datetime-range",Cell:({cell:s})=>p(s.getValue()),maxSize:100,enableColumnFilter:!1},{accessorKey:"refundCaptureDate",header:"Refund Capture Date",enableSorting:!0,accessorFn:s=>new Date(s.refundCaptureDate),filterVariant:"datetime-range",Cell:({cell:s})=>{const I=s.getValue();return D(I).format("DD MMM YYYY hh:mm A")},muiFilterDateTimePickerProps:{label:"Refund Capture Date",timeSteps:{minutes:1}},maxSize:100},{accessorKey:"refundAmount",header:"Refund Amount",enableSorting:!1,maxSize:100,enableColumnFilter:!1},{accessorKey:"isSettled",header:"Is Settled",enableSorting:!1,maxSize:100,Cell:({cell:s})=>d.jsx(E,{children:s.getValue()?"Yes":"No"}),enableColumnFilter:!0,filterVariant:"autocomplete",filterSelectOptions:[{value:"true",label:"YES"},{value:"false",label:"NO"}]}],[]);return d.jsx(M,{children:d.jsx(i.Suspense,{fallback:d.jsx(Y,{height:300,width:"100%"}),children:d.jsx(z,{data:((f=l==null?void 0:l.data)==null?void 0:f.refundOrders)??[],columnFilters:a,columns:x,pagination:n,sorting:t,totalRowCount:((m=l==null?void 0:l.data)==null?void 0:m.totalCount)??0,onColumnFiltersChange:r,onPaginationChange:o,onSortingChange:e,isLoading:b,OnFilterButtonClicked:()=>u(),OnApplyFiltersClicked:()=>h(),filterDrawerIsOpen:c,isError:y,tableName:"RefundDisplay",crudOperationHeader:"Refunds",columnPinning:{left:["orderId","orderDate"],right:["refundAmount","isSettled"]},uniqueIDForRows:"_id",enableRowActions:!1})})})};export{B as default};
