import{r as l,y as F,z as k,A as x,b as g,F as I,j as n,S as T}from"./index-DJfC_LKA.js";import{r as i,t as H,a as O,D as w}from"./MUIThemeProvider-DlitpbUb.js";import{A as E}from"./AppChipComponent-D5JcRf4Y.js";import{a as D}from"./helperFuntions-D5lYpqZv.js";import"./index.esm-D1SUAxcJ.js";import"./Rating-DqUX-sFn.js";import"./FormikInputField-BCFqIq4V.js";import"./TextInput-Dcw03Ip4.js";import"./useUpdateUser-DMboG7Aw.js";import"./index-DEqkLp3P.js";import"./Alert-U0SP077c.js";import"./LoadingOverlay-SsZ0EzDw.js";import"./Title-CRBpu3gT.js";const j=e=>{var a,o;let t="";return(a=e==null?void 0:e[0])==null||a.id,(o=e==null?void 0:e[0])==null||o.desc,t?{sort:t}:{}},B=e=>{let t={};return e==null||e.forEach(a=>{var o;Array.isArray(a.value)?t[a.id]=(o=a.value)==null?void 0:o.join(","):t[a.id]=a.value}),t},K=(e,t,a)=>{const o={pageNo:a.pageIndex+1,limit:a.pageSize,...j(t),...B(e)};return x.GET(g.GET_ALL_BANK_ACCOUNTS(),{params:o})},P=({columnFilters:e,EnableQuery:t,sorting:a,pagination:o})=>{const[s,d]=l.useState([]);return l.useEffect(()=>{t&&d(e)},[e,t]),F({queryKey:["BankAccounts-Grid-data",s,a,o],queryFn:()=>K(s,a,o),placeholderData:k,refetchOnMount:!1,refetchOnWindowFocus:!1,retry:2})},v=[{key:"accId",name:"accId",fieldType:"Number",label:"Account ID",disabled:{disabledFieldForNew:!0,disableFieldForEdit:!0},hidden:{hideFieldForNEW:!0}},{key:"accountHolderName",name:"accountHolderName",fieldType:"Text",label:"Account Holder Name"},{key:"bankName",name:"bankName",fieldType:"Text",label:"Bank Name"},{key:"accountNumber",name:"accountNumber",fieldType:"Number",label:"Account Number"},{key:"sortCode",name:"sortCode",fieldType:"SortCode",label:"Sort Code"},{key:"accountHolderId",name:"accountHolderId",fieldType:"Number",label:"Account Holder ID",disabled:{disabledFieldForNew:!0,disableFieldForEdit:!0},hidden:{hideFieldForNEW:!0}},{key:"accountRole",name:"accountRole",fieldType:"Select",label:"Account Role",meta:{options:i}}],Y=()=>{var m,p;const[e,t]=l.useState([]),[a,o]=l.useState([]),[s,d]=l.useState({pageIndex:0,pageSize:50}),[u,{open:y,close:C}]=I(!1),{data:c,isError:S,isLoading:h}=P({columnFilters:e,EnableQuery:!u,sorting:a,pagination:s}),A=l.useMemo(()=>[{accessorKey:"accountHolderName",header:"Account Holder Name"},{accessorKey:"accountNumber",header:"Account Number",enableColumnFilter:!1,enableSorting:!1},{accessorKey:"bankName",header:"Bank Name",enableColumnFilter:!1,enableSorting:!1},{accessorKey:"sortCode",header:"Sort Code",enableColumnFilter:!1,enableSorting:!1,Cell:({cell:r})=>H(r.getValue())??n.jsx(n.Fragment,{})},{accessorKey:"accountRole",header:"Account Holder Role",Cell:({cell:r})=>{var f,b;return n.jsx(E,{value:((b=(f=i)==null?void 0:f.find(N=>N.value===r.getValue()))==null?void 0:b.label)??""})},enableColumnFilter:!0,enableSorting:!1,filterVariant:"multi-select",filterSelectOptions:i},{accessorKey:"accountAddedOn",header:"Account Added On",enableSorting:!0,accessorFn:r=>new Date(r.accountAddedOn),enableColumnFilter:!1,Cell:({cell:r})=>D(r.getValue()),maxSize:150}],[]);return n.jsx(O,{children:n.jsx(l.Suspense,{fallback:n.jsx(T,{height:300,width:"100%"}),children:n.jsx(w,{data:((m=c==null?void 0:c.data)==null?void 0:m.bankAccounts)??[],columnFilters:e,columns:A,pagination:s,sorting:a,totalRowCount:((p=c==null?void 0:c.data)==null?void 0:p.totalCount)??0,onColumnFiltersChange:t,onPaginationChange:d,onSortingChange:o,isLoading:h,OnFilterButtonClicked:()=>y(),OnApplyFiltersClicked:()=>C(),filterDrawerIsOpen:u,enableRowSelection:!0,isError:S,tableName:"BankAccountDisplay",crudOperationHeader:"Bank Account",columnPinning:{left:["mrt-row-select","mrt-row-actions","accountHolderName"]},uniqueIDForRows:"accId",uiSchema:v})})})};export{Y as default};
