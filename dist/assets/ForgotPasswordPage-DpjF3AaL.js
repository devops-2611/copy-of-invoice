import{a as d,n as u,A as p,b as x,c as f,r as h,j as e,P as g,B as n,T as j,e as w}from"./index-DJfC_LKA.js";import{c as y,a as S,u as P}from"./index.esm-D1SUAxcJ.js";import{A}from"./index-DEqkLp3P.js";import{C as E}from"./Container-DA_X_LAQ.js";import{A as T}from"./Alert-U0SP077c.js";import{I as k}from"./IconAlertTriangle-DdjKYBNR.js";import{T as C}from"./Title-CRBpu3gT.js";import{S as l}from"./Space-D1jX2lCw.js";import{T as F}from"./TextInput-Dcw03Ip4.js";import{A as b}from"./Anchor-DM8PMMOq.js";const R=async s=>{if(!s)throw new Error("Email is required");return p.POST(x.FORGOT_PASSWORD(),{email:s})},q=()=>d({mutationFn:async({email:s})=>await R(s),onError:s=>{var r,o;const t=s instanceof A?((o=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:o.message)??"Failed to send password reset link.":"An unexpected error occurred. Please try again.";u.show({title:"Error",message:t,color:"red",autoClose:5e3})}}),v={email:""},z=y({email:S().email("Invalid email format").required("Email is required")}),L=()=>{var i;const{mutate:s,isSuccess:t,data:r}=q(),o=f(),c=h.useCallback(()=>{o("/login")},[]),a=P({initialValues:v,validationSchema:z,onSubmit:m=>{s(m)}});return e.jsx(E,{size:"xs",mt:"xl",children:t&&((i=r==null?void 0:r.data)!=null&&i.success)?e.jsx(T,{icon:e.jsx(k,{size:"1rem"}),title:"Success",color:"green",styles:{title:{fontSize:18}},children:"Password Reset Link Sent Successfuly. You can close this tab."}):e.jsxs(g,{p:"xl",shadow:"xs",withBorder:!0,children:[e.jsxs(n,{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[e.jsx(C,{order:3,children:"Forgot your password?"}),e.jsx(j,{mt:"sm",size:"sm",children:"Please enter the email address associated with your account and we will email you a link to reset your password."})]}),e.jsx(l,{h:"lg"}),e.jsxs("form",{onSubmit:a.handleSubmit,children:[e.jsx(F,{placeholder:"Email address (Required)",...a.getFieldProps("email"),error:a.touched.email&&a.errors.email,required:!0}),e.jsx(l,{h:"md"}),e.jsx(w,{type:"submit",fullWidth:!0,children:"Reset Password"}),e.jsx(n,{mt:"md",style:{display:"flex",justifyContent:"center"},children:e.jsx(b,{onClick:c,size:"sm",children:"Back"})})]})]})})};export{L as default};
