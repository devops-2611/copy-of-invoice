import{r as n,E as F,F as k,A as I,b as g,K as T,j as l,d as x}from"./index-C9Ciycjy.js";import{v as f,w as D,a as E,D as H,T as O}from"./MUIThemeProvider-rthW6W32.js";import{A as K}from"./AppChipComponent-1TDGqaTD.js";import{a as j}from"./helperFuntions-7H5wIplU.js";import"./index-D3fRiVGU.js";import"./index.esm-DCdPUB21.js";import"./InputBase-IkFEOTEJ.js";import"./FormikInputField-nlZqF9vi.js";import"./TextInput-BjPE68lS.js";import"./useUpdateUser-Diei4mhr.js";import"./Select-DufhBURI.js";import"./Alert-v-SYRoNK.js";import"./LoadingOverlay-DEuuc4vr.js";import"./Title-DhQLflRm.js";import"./Stack-Dk_up6_e.js";const v=e=>{var a,o;let r="";return(a=e==null?void 0:e[0])==null||a.id,(o=e==null?void 0:e[0])==null||o.desc,r?{sort:r}:{}},B=e=>{let r={};return e==null||e.forEach(a=>{var o;Array.isArray(a.value)?r[a.id]=(o=a.value)==null?void 0:o.join(","):r[a.id]=a.value}),r},P=(e,r,a)=>{const o={pageNo:a.pageIndex+1,limit:a.pageSize,...v(r),...B(e)};return I.GET(g.GET_ALL_BANK_ACCOUNTS(),{params:o})},R=({columnFilters:e,EnableQuery:r,sorting:a,pagination:o})=>{const[s,m]=n.useState([]);return n.useEffect(()=>{r&&m(e)},[e,r]),F({queryKey:["BankAccounts-Grid-data",s,a,o],queryFn:()=>P(s,a,o),placeholderData:k,refetchOnMount:!1,refetchOnWindowFocus:!1,retry:2})},M=[{key:"accId",name:"accId",fieldType:"Number",label:"Account ID",disabled:{disabledFieldForNew:!0,disableFieldForEdit:!0},hidden:{hideFieldForNEW:!0}},{key:"accountHolderName",name:"accountHolderName",fieldType:"Text",label:"Account Holder Name"},{key:"bankName",name:"bankName",fieldType:"Text",label:"Bank Name"},{key:"accountNumber",name:"accountNumber",fieldType:"Number",label:"Account Number"},{key:"sortCode",name:"sortCode",fieldType:"SortCode",label:"Sort Code"},{key:"accountHolderId",name:"accountHolderId",fieldType:"Number",label:"Account Holder ID",disabled:{disabledFieldForNew:!0,disableFieldForEdit:!0},hidden:{hideFieldForNEW:!0}},{key:"accountRole",name:"accountRole",fieldType:"Select",label:"Account Role",meta:{options:f}},{key:"merchant Id",name:"merchantId",fieldType:"MerchantIDs",label:"Merchant",meta:{multiSelect:!1,conditionallyRender:!0}}],ee=()=>{var b,y;const[e,r]=n.useState([]),[a,o]=n.useState([]),[s,m]=n.useState({pageIndex:0,pageSize:50}),[p,{open:h,close:C}]=T(!1),{data:c,isError:N,isLoading:S}=R({columnFilters:e,EnableQuery:!p,sorting:a,pagination:s}),A=n.useMemo(()=>[{accessorKey:"accountHolderName",header:"Account Holder Name"},{accessorKey:"accountNumber",header:"Account Number",enableColumnFilter:!1,enableSorting:!1},{accessorKey:"bankName",header:"Bank Name",enableColumnFilter:!1,enableSorting:!1},{accessorKey:"sortCode",header:"Sort Code",enableColumnFilter:!1,enableSorting:!1,Cell:({cell:t})=>D(t.getValue())??l.jsx(l.Fragment,{})},{accessorKey:"accountRole",header:"Account Holder Role",Cell:({cell:t})=>{var d,i;return l.jsx(K,{value:((i=(d=f)==null?void 0:d.find(u=>u.value===t.getValue()))==null?void 0:i.label)??""})},enableColumnFilter:!0,enableSorting:!1,filterVariant:"multi-select",filterSelectOptions:f},{accessorKey:"accountAddedOn",header:"Account Added On",enableSorting:!0,accessorFn:t=>new Date(t.accountAddedOn),enableColumnFilter:!1,Cell:({cell:t})=>j(t.getValue()),maxSize:150},{accessorKey:"merchantId",header:"Merchant ID",enableSorting:!1,enableColumnFilter:!1,Cell:({row:t})=>{var d,i,u;return(d=t==null?void 0:t.original)!=null&&d.merchantId?`${((i=t==null?void 0:t.original)==null?void 0:i.merchantName)??""} (${(u=t==null?void 0:t.original)==null?void 0:u.merchantId})`:null}}],[]);return l.jsx(E,{children:l.jsx(n.Suspense,{fallback:l.jsx(x,{height:300,width:"100%"}),children:l.jsx(H,{data:((b=c==null?void 0:c.data)==null?void 0:b.bankAccounts)??[],columnFilters:e,columns:A,pagination:s,sorting:a,totalRowCount:((y=c==null?void 0:c.data)==null?void 0:y.totalCount)??0,onColumnFiltersChange:r,onPaginationChange:m,onSortingChange:o,isLoading:S,OnFilterButtonClicked:()=>h(),OnApplyFiltersClicked:()=>C(),filterDrawerIsOpen:p,enableRowSelection:!0,isError:N,tableName:O.BankAccountDisplay,crudOperationHeader:"Bank Account",columnPinning:{left:["mrt-row-select","mrt-row-actions","accountHolderName"]},uniqueIDForRows:"accId",uiSchema:M})})})};export{ee as default};
