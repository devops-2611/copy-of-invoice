import{u as x,a as h,n as g,A as j,b as f,c as w,r as i,j as s,C as S,P as b,I as y,S as k,d as F,B as n,e as C}from"./index-C9Ciycjy.js";import{F as L,c as P,a as v,b as m}from"./index.esm-DCdPUB21.js";import{F as A}from"./FormikInputField-nlZqF9vi.js";import{F as q}from"./FormikPasswordField-B7n9rola.js";import{S as E}from"./Stack-Dk_up6_e.js";import{T as d}from"./Title-DhQLflRm.js";import{S as l}from"./Space-BNO5XJcw.js";import{A as I}from"./Anchor-BYuLHE6e.js";import{A as U}from"./Alert-v-SYRoNK.js";import{L as B}from"./LoadingOverlay-DEuuc4vr.js";import"./TextInput-BjPE68lS.js";import"./InputBase-IkFEOTEJ.js";const N=async(r,e)=>{if(!r||!e)throw new Error("Query (email or username) and password are required");return j.POST(f.LOGIN_USER(),{query:r,password:e})},T=()=>{const{login:r}=x();return h({mutationFn:async({query:e,password:o})=>N(e,o),onSuccess:e=>{if(e!=null&&e.data.success){const{token:o,user:t}=(e==null?void 0:e.data)??{};localStorage.setItem("appToken",o),r(t),g.show({title:"Login Successful",message:`Welcome back, ${(t==null?void 0:t.firstName)??"User"}`,color:"green",autoClose:3e3,position:"top-center"})}}})},z={query:"",password:""},O=P({query:m().required("Email/Username is required"),password:m().required("Password is required")}),X=()=>{const{mutate:r,isPending:e,error:o}=T(),t=w(),u=i.useCallback(()=>{t("/auth/forgot-password")},[]),p=i.useCallback(a=>{r(a)},[]);return s.jsx(S,{size:"xs",my:"xl",children:s.jsxs(b,{p:"lg",shadow:"sm",withBorder:!0,pos:"relative",styles:{root:{boxShadow:"0 8px 20px rgba(0, 0, 0, 0.15)",transition:"box-shadow 0.3s ease","&:hover":{boxShadow:"0 12px 25px rgba(0, 0, 0, 0.2)"}}},children:[s.jsxs(E,{align:"center",children:[s.jsx(i.Suspense,{fallback:s.jsx(F,{height:200,width:200}),children:s.jsx(y,{h:120,w:"auto",fit:"contain",src:k})}),s.jsx(d,{order:4,mt:"0",children:"Welcome to Swishr"})]}),s.jsx(l,{h:"md"}),s.jsx(n,{style:{display:"flex",justifyContent:"center"},children:s.jsx(d,{order:3,children:"Login"})}),s.jsx(L,{validationSchema:O,onSubmit:p,initialValues:z,children:()=>{var a,c;return s.jsxs(v,{children:[s.jsx(A,{name:"query",label:"Username/Email"}),s.jsx(l,{h:"md"}),s.jsx(q,{label:"Password",name:"password"}),s.jsx(n,{mt:"xs",style:{display:"flex",justifyContent:"flex-end"},children:s.jsx(I,{onClick:u,size:"sm",children:"Forgot Password?"})}),s.jsx(l,{h:"md"}),o&&s.jsx(U,{color:"red",mb:10,children:((c=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:c.message)??(o==null?void 0:o.message)}),s.jsx(n,{style:{display:"flex",justifyContent:"center"},children:s.jsx(C,{type:"submit",size:"md",w:200,loading:e,children:"Login"})})]})}}),s.jsx(B,{visible:e})]})})};export{X as default};
