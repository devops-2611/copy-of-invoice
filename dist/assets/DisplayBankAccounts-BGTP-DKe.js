import{r,y as F,z as k,A as x,b as I,F as T,j as s,S as g}from"./index-QDmumIP4.js";import{r as i,a as H,D as O}from"./MUIThemeProvider-Hl_UDlpR.js";import{A as w}from"./AppChipComponent-Cqkd8-WL.js";import{a as E}from"./helperFuntions-DGMK7A4e.js";import"./index.esm-DIYcYUZE.js";import"./Rating-CyDkRCVj.js";import"./FormikInputField-Bd876Pl6.js";import"./TextInput-DaGPfqTM.js";import"./useUpdateUser-0zO8fXV7.js";import"./index-BObyytyr.js";import"./Alert-3nYhnQfH.js";import"./LoadingOverlay-C-xxoboR.js";import"./Title-C0NKl79D.js";const D=e=>{var a,o;let t="";return(a=e==null?void 0:e[0])==null||a.id,(o=e==null?void 0:e[0])==null||o.desc,t?{sort:t}:{}},B=e=>{let t={};return e==null||e.forEach(a=>{var o;Array.isArray(a.value)?t[a.id]=(o=a.value)==null?void 0:o.join(","):t[a.id]=a.value}),t},K=(e,t,a)=>{const o={pageNo:a.pageIndex+1,limit:a.pageSize,...D(t),...B(e)};return x.GET(I.GET_ALL_BANK_ACCOUNTS(),{params:o})},P=({columnFilters:e,EnableQuery:t,sorting:a,pagination:o})=>{const[l,d]=r.useState([]);return r.useEffect(()=>{t&&d(e)},[e,t]),F({queryKey:["BankAccounts-Grid-data",l,a,o],queryFn:()=>K(l,a,o),placeholderData:k,refetchOnMount:!1,refetchOnWindowFocus:!1,retry:2})},j=[{key:"accId",name:"accId",fieldType:"Number",label:"Account ID",disabled:{disabledFieldForNew:!0,disableFieldForEdit:!0},hidden:{hideFieldForNEW:!0}},{key:"accountHolderName",name:"accountHolderName",fieldType:"Text",label:"Account Holder Name"},{key:"bankName",name:"bankName",fieldType:"Text",label:"Bank Name"},{key:"accountNumber",name:"accountNumber",fieldType:"Number",label:"Account Number"},{key:"sortCode",name:"sortCode",fieldType:"SortCode",label:"Sort Code"},{key:"accountHolderId",name:"accountHolderId",fieldType:"Number",label:"Account Holder ID",disabled:{disabledFieldForNew:!0,disableFieldForEdit:!0},hidden:{hideFieldForNEW:!0}},{key:"accountRole",name:"accountRole",fieldType:"Select",label:"Account Role",meta:{options:i}}],X=()=>{var m,p;const[e,t]=r.useState([]),[a,o]=r.useState([]),[l,d]=r.useState({pageIndex:0,pageSize:50}),[u,{open:y,close:C}]=T(!1),{data:n,isError:h,isLoading:A}=P({columnFilters:e,EnableQuery:!u,sorting:a,pagination:l}),N=r.useMemo(()=>[{accessorKey:"accountHolderName",header:"Account Holder Name"},{accessorKey:"accountNumber",header:"Account Number",enableColumnFilter:!1,enableSorting:!1},{accessorKey:"bankName",header:"Bank Name",enableColumnFilter:!1,enableSorting:!1},{accessorKey:"sortCode",header:"Sort Code",enableColumnFilter:!1,enableSorting:!1},{accessorKey:"accountRole",header:"Account Holder Role",Cell:({cell:c})=>{var f,b;return s.jsx(w,{value:((b=(f=i)==null?void 0:f.find(S=>S.value===c.getValue()))==null?void 0:b.label)??""})},enableColumnFilter:!0,enableSorting:!1,filterVariant:"multi-select",filterSelectOptions:i},{accessorKey:"accountAddedOn",header:"Account Added On",enableSorting:!0,accessorFn:c=>new Date(c.accountAddedOn),enableColumnFilter:!1,Cell:({cell:c})=>E(c.getValue()),maxSize:150}],[]);return s.jsx(H,{children:s.jsx(r.Suspense,{fallback:s.jsx(g,{height:300,width:"100%"}),children:s.jsx(O,{data:((m=n==null?void 0:n.data)==null?void 0:m.bankAccounts)??[],columnFilters:e,columns:N,pagination:l,sorting:a,totalRowCount:((p=n==null?void 0:n.data)==null?void 0:p.totalCount)??0,onColumnFiltersChange:t,onPaginationChange:d,onSortingChange:o,isLoading:A,OnFilterButtonClicked:()=>y(),OnApplyFiltersClicked:()=>C(),filterDrawerIsOpen:u,enableRowSelection:!0,isError:h,tableName:"BankAccountDisplay",crudOperationHeader:"Bank Account",columnPinning:{left:["mrt-row-select","mrt-row-actions","accountHolderName"]},uniqueIDForRows:"accId",uiSchema:j})})})};export{X as default};
